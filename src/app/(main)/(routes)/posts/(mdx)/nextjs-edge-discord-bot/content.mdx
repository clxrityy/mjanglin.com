import { MainImage, TemplateRepository, DemoRespository } from "./components";

# How to host a Discord bot on Vercel with Edge Functions

<MainImage />


## Edge Features

- **Fast**: Edge Functions are executed at the edge of the network, close to users, which means they run with lower latency.
- **Secure**: Edge Functions are sandboxed and run in a secure environment.
- **Scalable**: Edge Functions scale automatically with traffic, so you don't have to worry about provisioning or managing servers.
- **Simple**: Edge Functions are easy to deploy and manage, with a simple API and CLI.

## Overview

This page is a comprehensive guide on how to host a Discord bot on Vercel with Edge Functions. I'll cover everything from setting up a new Discord bot to deploying it to Vercel.

### Throughout this guide, here are the tools that will be utilized:
- **Database & Storage**: [Prisma](https://www.prisma.io/) & [Vercel Postgres](https://vercel.com/docs/storage/vercel-postgres)
    - Prisma is a modern database toolkit that makes it easy to work with databases. Vercel Postgres is a managed PostgreSQL database that is easy to set up and use.
    - The extension [Prisma Accelerate](https://www.prisma.io/accelerate) is also utilized for edge caching.
- **Discord API**: [discord-api-types](https://www.npmjs.com/package/discord-api-types) is a package that provides TypeScript types for the Discord API.
- **OAuth2**: Multiple packages are used to facilitate authentication through Discord with encryption and security in mind.
    - **[cookie](https://www.npmjs.com/package/cookie)**: A package that provides cookie parsing and serialization.
    - **[jsonwebtoken](https://www.npmjs.com/package/jsonwebtoken)**: A package that provides JSON Web Token (JWT) support.
    - **[crypto-js](https://www.npmjs.com/package/crypto-js)**: A package that provides cryptographic functions.
    - **[tweetnacl](https://www.npmjs.com/package/tweetnacl)**: A package that eases process of verification with Discord.

---

## Template repositories

All of this wouldn't be possible without the work from [@jzxhuang](https://github.com/jzxhuang) and his [nextjs-discord-bot](https://github.com/jzxhuang/nextjs-discord-bot) template:

<TemplateRepository />

> This template provides you with the basic starter boiler plate for registering commands, and handling interactions with Discord on Edge runtime.

---

To extend that template further for the purpose of authentication and an interactive dashboard, I created a fork of it:

<DemoRespository />

> #### This template extends the base template to include:
> - OAuth2 authentication with Discord
>   - Including encyption, cookie management, and JWT verification
> - Prisma for database management (storing authenticated users)
> - A simple dashboard to view authenticated users

For an extended overview on the changes made to the initial template and how to set it up, check out the [pull request](https://github.com/jzxhuang/nextjs-discord-bot/pull/4) I made to the original repository.

---

## To be continued...
